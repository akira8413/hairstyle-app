<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«ªå‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }
        @media (max-width: 700px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }
        .upload-box {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .upload-box h3 {
            margin-bottom: 12px;
            color: #667eea;
        }
        .preview-image {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: 8px;
            background: #f5f5f5;
        }
        .result-container {
            text-align: center;
            padding: 20px;
        }
        .result-image {
            max-width: 100%;
            max-height: 500px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }
        .comparison-view {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 16px;
            align-items: center;
            margin-bottom: 20px;
        }
        .comparison-arrow {
            font-size: 2rem;
            color: #667eea;
        }
        .comparison-item {
            text-align: center;
        }
        .comparison-item img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
        }
        .comparison-item h4 {
            margin-top: 8px;
            color: #666;
        }
        .generate-btn {
            width: 100%;
            padding: 16px;
            font-size: 1.2rem;
            margin-top: 20px;
        }
        .drop-zone-small {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .drop-zone-small:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        .drop-zone-small.has-image {
            border-style: solid;
            border-color: #667eea;
        }
        .hidden {
            display: none !important;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
        }
        .action-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* ===== æ–°ã—ã„ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠUI ===== */
        .gender-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        .gender-tab {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            transition: all 0.2s;
        }
        .gender-tab:hover {
            border-color: #667eea;
        }
        .gender-tab.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 16px;
        }
        .preset-btn {
            padding: 14px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            font-size: 0.95rem;
        }
        .preset-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
        }
        .preset-btn.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .preset-btn .preset-icon {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 4px;
        }
        .preset-btn .preset-name {
            font-weight: bold;
        }
        .preset-btn .preset-desc {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-top: 2px;
        }

        .reference-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #eee;
        }
        .reference-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            color: #666;
            font-size: 0.9rem;
        }
        .reference-toggle:hover {
            color: #667eea;
        }
        .reference-content {
            margin-top: 12px;
        }
        .reference-note {
            font-size: 0.8rem;
            color: #888;
            margin-top: 8px;
            text-align: center;
        }

        /* ===== ç”Ÿæˆå¾Œèª¿æ•´ãƒ‘ãƒãƒ« ===== */
        .adjust-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .adjust-panel h3 {
            margin-bottom: 16px;
            color: #667eea;
            text-align: center;
        }
        .adjust-row {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        .adjust-item {
            flex: 1;
            min-width: 140px;
        }
        .adjust-item label {
            display: block;
            font-weight: bold;
            margin-bottom: 6px;
            color: #333;
            font-size: 0.9rem;
        }
        .adjust-item select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }
        .adjust-item select:focus {
            outline: none;
            border-color: #667eea;
        }
        .regenerate-btn {
            width: 100%;
            padding: 14px;
            font-size: 1.1rem;
            margin-top: 8px;
        }

        /* é¸æŠçŠ¶æ…‹ã®è¡¨ç¤º */
        .selection-summary {
            background: #f8f9ff;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
            text-align: center;
        }
        .selection-summary .selected-style {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’‡ é«ªå‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
            <p>é¡”å†™çœŸã¨é«ªå‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸ã‚“ã§ã€æ–°ã—ã„è‡ªåˆ†ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>
            <div class="header-buttons">
                <button class="btn btn-header" onclick="window.location.href='index.html'">
                    ğŸ  ãƒ›ãƒ¼ãƒ 
                </button>
            </div>
        </header>

        <main>
            <!-- å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="inputSection">
                <div class="two-column">
                    <!-- é¡”å†™çœŸ -->
                    <div class="upload-box">
                        <h3>ğŸ“¸ ã‚ãªãŸã®é¡”å†™çœŸ</h3>
                        <div id="faceDropZone" class="drop-zone-small">
                            <span style="font-size: 2rem;">ğŸ“¤</span>
                            <p>ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠ</p>
                        </div>
                        <img id="facePreview" class="preview-image hidden" alt="é¡”å†™çœŸ">
                        <input type="file" id="faceInput" accept="image/*" style="display: none;">
                        <div style="display: flex; gap: 8px; margin-top: 8px;">
                            <button id="faceCameraBtn" class="btn btn-secondary" style="flex: 1;">
                                ğŸ“· æ’®å½±
                            </button>
                            <button id="faceFileBtn" class="btn btn-secondary" style="flex: 1;">
                                ğŸ“ é¸æŠ
                            </button>
                        </div>
                    </div>

                    <!-- é«ªå‹é¸æŠ -->
                    <div class="upload-box">
                        <h3>âœ¨ ãªã‚ŠãŸã„é«ªå‹ã‚’é¸ã¶</h3>

                        <!-- ãƒ¡ãƒ³ã‚º/ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹åˆ‡ã‚Šæ›¿ãˆ -->
                        <div class="gender-tabs">
                            <button class="gender-tab active" data-gender="mens">ğŸ‘¨ ãƒ¡ãƒ³ã‚º</button>
                            <button class="gender-tab" data-gender="ladies">ğŸ‘© ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹</button>
                        </div>

                        <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
                        <div id="presetContainer" class="preset-grid">
                            <!-- JSã§å‹•çš„ã«ç”Ÿæˆ -->
                        </div>

                        <!-- é¸æŠçŠ¶æ…‹è¡¨ç¤º -->
                        <div id="selectionSummary" class="selection-summary hidden">
                            <span class="selected-style" id="selectedStyleName">-</span>
                        </div>

                        <!-- å‚è€ƒç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ -->
                        <div class="reference-section">
                            <div class="reference-toggle" id="referenceToggle">
                                <span>ğŸ“·</span>
                                <span>å‚è€ƒç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</span>
                                <span id="toggleArrow">â–¼</span>
                            </div>
                            <div id="referenceContent" class="reference-content hidden">
                                <div id="hairstyleDropZone" class="drop-zone-small" style="min-height: 100px; padding: 12px;">
                                    <span style="font-size: 1.5rem;">ğŸ“¤</span>
                                    <p style="font-size: 0.85rem;">å‚è€ƒã«ã—ãŸã„é«ªå‹ç”»åƒ</p>
                                </div>
                                <img id="hairstylePreview" class="preview-image hidden" alt="å‚è€ƒç”»åƒ" style="max-height: 150px;">
                                <input type="file" id="hairstyleInput" accept="image/*" style="display: none;">
                                <p class="reference-note">â€» å®Œå…¨ãªã‚³ãƒ”ãƒ¼ã§ã¯ãªãã€é›°å›²æ°—ã‚’å‚è€ƒã«ã—ã¾ã™</p>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="generateBtn" class="btn btn-success generate-btn" disabled>
                    ğŸª„ é«ªå‹ã‚’åˆæˆã™ã‚‹
                </button>
            </div>

            <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° -->
            <div id="loadingSection" class="loading-overlay hidden">
                <div class="spinner"></div>
                <p style="margin-top: 20px; font-size: 1.2rem;">AIãŒé«ªå‹ã‚’åˆæˆä¸­...</p>
                <p style="color: #ccc;">5ã€œ15ç§’ã»ã©ãŠå¾…ã¡ãã ã•ã„</p>
            </div>

            <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="resultSection" class="hidden">
                <h2>âœ¨ åˆæˆçµæœ</h2>

                <!-- Before/Afteræ¯”è¼ƒ -->
                <div class="comparison-view">
                    <div class="comparison-item">
                        <img id="resultFace" alt="å…ƒã®å†™çœŸ">
                        <h4>Before</h4>
                    </div>
                    <div class="comparison-arrow">â†’</div>
                    <div class="comparison-item">
                        <img id="resultGenerated" alt="åˆæˆå¾Œ">
                        <h4>After</h4>
                    </div>
                </div>

                <!-- å¤§ããªçµæœç”»åƒ -->
                <div class="result-container">
                    <img id="resultImageLarge" class="result-image" alt="åˆæˆçµæœ">
                </div>

                <!-- èª¿æ•´ãƒ‘ãƒãƒ« -->
                <div class="adjust-panel">
                    <h3>ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´</h3>
                    <div class="adjust-row">
                        <div class="adjust-item">
                            <label>ğŸ“ é•·ã•</label>
                            <select id="adjustLength">
                                <option value="shorter">ã‚‚ã£ã¨çŸ­ã</option>
                                <option value="same" selected>ç¾çŠ¶ç¶­æŒ</option>
                                <option value="longer">ã‚‚ã£ã¨é•·ã</option>
                            </select>
                        </div>
                        <div class="adjust-item">
                            <label>ğŸ¨ é«ªè‰²</label>
                            <select id="adjustColor">
                                <option value="same" selected>ç¾çŠ¶ç¶­æŒ</option>
                                <option value="black">é»’é«ª</option>
                                <option value="dark_brown">ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ©ã‚¦ãƒ³</option>
                                <option value="brown">ãƒ–ãƒ©ã‚¦ãƒ³</option>
                                <option value="light_brown">ãƒ©ã‚¤ãƒˆãƒ–ãƒ©ã‚¦ãƒ³</option>
                                <option value="blonde">é‡‘é«ª</option>
                                <option value="ash">ã‚¢ãƒƒã‚·ãƒ¥ç³»</option>
                                <option value="red">èµ¤ç³»</option>
                            </select>
                        </div>
                        <div class="adjust-item">
                            <label>ğŸ’« ã‚¹ã‚¿ã‚¤ãƒ«</label>
                            <select id="adjustStyle">
                                <option value="same" selected>ç¾çŠ¶ç¶­æŒ</option>
                                <option value="straight">ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ</option>
                                <option value="wavy">ã‚¦ã‚§ãƒ¼ãƒ–</option>
                                <option value="curly">ãƒ‘ãƒ¼ãƒ</option>
                                <option value="natural">ãƒŠãƒãƒ¥ãƒ©ãƒ«</option>
                            </select>
                        </div>
                    </div>
                    <button id="regenerateBtn" class="btn btn-primary regenerate-btn">
                        ğŸ”„ ã“ã®è¨­å®šã§å†ç”Ÿæˆ
                    </button>
                </div>

                <div class="action-buttons">
                    <button id="downloadBtn" class="btn btn-success">
                        ğŸ’¾ ä¿å­˜
                    </button>
                    <button id="retryBtn" class="btn btn-secondary">
                        ğŸ”™ é«ªå‹ã‚’é¸ã³ç›´ã™
                    </button>
                    <button id="newBtn" class="btn btn-secondary">
                        ğŸ†• æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script src="hairstyle.js"></script>
</body>
</html>
